{% extends "base.html.twig" %}

{% block title %}Gestion du profil
{% endblock %}

{% block body %}

	<div class="background">

		<div class="container fade-up">
			<h1 class="profil-title text-center my-5">Mon profil</h1>
			<div class="d-flex justify-content-between align-items-center mb-5">
				<div class="profile-container col-12 col-lg-4 row">
					<h2 class="profil-title">Liste d'ami(es)</h2>
					<table class="table-pokedex">
						<thead class="thead-top10">
							<tr>
								<th class="text-center" scope="col">Pseudo</th>
								<th class="text-center" scope="col">Statut</th>
								<th class="text-center" scope="col">Date de l'ajout</th>
							</tr>
						</thead>
						<tbody>
						{% for friend in user.friendships %}

							<tr class="pokedex-top-10">
								<td class="text-center"><a href="{{ path('app_user_showprofile', { pseudonym : friend.pseudonym })}}"> {{ friend.pseudonym }}</a> </td>
								<td class="text-center">{{ friend.createdAt|date('d/m/Y') }}/{{ pokedexSize }}</td>
								<td class="text-center">{{ friend.isAccepted }} </td>
							</tr>
						{% endfor %}

						</tbody>
					</table>
					<div class="modify-info">
						<button class="modify-button">
							<div class="second-border-modify">
								<a href="{{ path('app_profil-modify') }}" class="modify-button-link"><img src="{{ asset('medias/images/elements/PokeBall.png') }}" alt="Poke Ball" width="50px">
									Ajouter
									<i class="fa-solid fa-chevron-right"></i>
								</a>
							</div>
						</button>
					</div>
				</div>

				<div id="carouselExample" class="carousel slide">
					<div class="carousel-inner carou-avatar">
						{% for avatar in avatars %}
						<div class="carousel-item  justify-content-center avatar">
							<img src="{{ asset('medias/images/trainers/' ~ avatar ~'.gif') }}" class="d-block trainer-gif" alt="..." data-avatar="{{ avatar }}">
						</div>
						{% endfor %}
					</div>

					<button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Previous</span>
					</button>
					<button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Next</span>
					</button>
					<div class="select-character text-center text-white">
						<button class="select-character-button">
						Choisir ce personnage
						</button>
					</div>

				</div>

				<div class="profile-container col-12 col-lg-4">
					<h2 class="profil-title">Informations du compte</h2>
					<ul class="list-group col-12 col-lg-12" id="compte">
						<li class="list-group-item ">Adresse E-mail&nbsp;:
							<span class="text-info">{{ app.user.email }}</span>
						</li>
						<li class="list-group-item ">Début de l'aventure&nbsp;:
							<span class="text-info">{{ app.user.creationDate|date('d/m/Y')}}</span>
						</li>
						<li class="list-group-item ">
							Compte&nbsp;:
							<span class="text-info">{{ is_granted('ROLE_ADMIN') ? 'Administrateur' : 'Utilisateur' }}</span>
						</li>
					</ul>

					<div class="modify-info">
						<button class="modify-button">
							<div class="second-border-modify">
								<a href="{{ path('app_profil-modify') }}" class="modify-button-link"><img src="{{ asset('medias/images/elements/PokeBall.png') }}" alt="Poke Ball" width="50px">Modifier
									<i class="fa-solid fa-chevron-right"></i>
								</a>
							</div>
						</button>
					</div>
				</div>
			</div>

			<div class="d-flex justify-content-between  align-items-center mb-5">
				<div class="profile-container col-12 col-lg-4">
					<h2 class="profil-title">Statistiques</h2>
					<ul class="list-group col-12 col-lg-12 text-center" id="utilisateur">
						<li class="list-group-item">Pseudo
						<span class="text-info">{{ app.user.pseudonym }}</span>
						</li>
						<li class="list-group-item ">Pokémons libérés&nbsp;:
							<span class="text-info">{{ app.user.launchCount }}</span>
						</li>
						<li class="list-group-item ">Pokémons Très Rare(s) libéré(s)&nbsp;:
							<span class="text-info">{{ nbTR }}</span>
						</li>
						<li class="list-group-item ">Pokémons Extrêmement Rare(s) libéré(s)&nbsp;:
							<span class="text-info">{{ nbEX }}</span>
						</li>
						<li class="list-group-item ">Pokémons Secret Rare(s) libéré(s)&nbsp;:
							<span class="text-info">{{ nbSR }}</span>
						</li>
						<li class="list-group-item ">Shiny obtenus&nbsp;:
							<span class="text-info">{{ nbShiny }}</span>
						</li>
						<li class="list-group-item ">Pokédex rempli à  {{ nbPokemonUnique }}/{{ pokedexSize }}
							<span class="text-info"></span>
						</li>
					</ul>
				</div>
				<div class="profile-container col-12 col-lg-8 row">
					<h2 class="profil-title">Top 10 joueurs</h2>
					<table class="table-pokedex">
						<thead class="thead-top10">
							<tr>
								<th class="text-center" scope="col">N°</th>
								<th class="text-center" scope="col">Pseudo</th>
								<th class="text-center" scope="col">Complétion Pokédex</th>
								<th class="text-center" scope="col">Pokéballs ouvertes</th>
							</tr>
						</thead>
						<tbody>
						{% for userData in topUserSpeciesSeen %}
							<tr class="pokedex-top-10">
								<td class="text-center">{{ loop.index }}</td>
								<td class="text-center"><a href="{{ path('app_user_showprofile', { pseudonym : userData.user.pseudonym })}}"> {{ userData.user.pseudonym }}</a> </td>
								<td class="text-center">{{ userData.total_species_seen }}/{{ pokedexSize }}</td>
								<td class="text-center">{{ userData.launch_count }} </td>
							</tr>
						{% endfor %}
						</tbody>
					</table>
				</div>
			</div>

		</div>

	</div>

{% endblock %}

{% block js %}

	<script>
		const profilPageApi = '{{ url('app_profil_api') }}';
		const avatar = '{{ user.avatar }}';
	</script>

	<script src="{{ asset('js/profil.js') }}">
	</script>
{% endblock %}